language: bash

sudo: true

services:
  - docker

before_script:
  - chmod +x test/unittest.sh
  - chmod +x bin/timelog
  - chmod +x test/test_dep.sh
  - export PATH=$PATH:$PWD/bin/
  - pushd test/
  - ./test_dep.sh
  - popd

script:
  - export PATH=$PATH:$PWD/bin/
  - pushd test/
  - ./unittest.sh
  - popd
  - docker build -t kcov . --build-arg TRAVIS_JOB_ID=$TRAVIS_JOB_ID
